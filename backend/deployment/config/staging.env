# Advanced Notification System - Staging Configuration
# This file contains staging environment variables

# Application Configuration
NODE_ENV=staging
PORT=5000
API_VERSION=v1

# Database Configuration
MONGODB_URI=mongodb://mongodb-staging:27017/healthcare_staging
MONGODB_OPTIONS={"maxPoolSize":10}

# Cache Configuration
REDIS_URL=redis://redis-staging:6379
REDIS_PASSWORD=your_staging_redis_password
REDIS_DB=1
REDIS_CONNECTION_POOL_SIZE=10

# External Service Configuration - Email (Test Keys)
SENDGRID_API_KEY=your_staging_sendgrid_api_key
SENDGRID_FROM_EMAIL=staging-noreply@yourdomain.com
SENDGRID_FROM_NAME=Healthcare Platform (Staging)
SENDGRID_WEBHOOK_SECRET=your_staging_sendgrid_webhook_secret

# AWS SES (Staging)
AWS_ACCESS_KEY_ID=your_staging_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_staging_aws_secret_access_key
AWS_REGION=us-east-1
AWS_SES_FROM_EMAIL=staging-noreply@yourdomain.com
AWS_SES_CONFIGURATION_SET=healthcare-notifications-staging

# External Service Configuration - SMS (Test Keys)
TWILIO_ACCOUNT_SID=your_staging_twilio_account_sid
TWILIO_AUTH_TOKEN=your_staging_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WEBHOOK_SECRET=your_staging_twilio_webhook_secret

# AWS SNS (Staging)
AWS_SNS_REGION=us-east-1
AWS_SNS_ACCESS_KEY_ID=your_staging_aws_sns_access_key
AWS_SNS_SECRET_ACCESS_KEY=your_staging_aws_sns_secret_key

# Security Configuration
JWT_SECRET=your_staging_jwt_secret_key_minimum_32_characters
JWT_EXPIRES_IN=24h
ENCRYPTION_KEY=your_staging_32_character_encryption_key
CORS_ORIGIN=https://staging.yourdomain.com,https://staging-app.yourdomain.com
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/ssl/certs/staging.yourdomain.com.crt
SSL_KEY_PATH=/etc/ssl/private/staging.yourdomain.com.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# Monitoring and Logging
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_MAX_SIZE=50m
LOG_MAX_FILES=5
SENTRY_DSN=your_staging_sentry_dsn
NEW_RELIC_LICENSE_KEY=your_staging_newrelic_license_key
NEW_RELIC_APP_NAME=notification-service-staging

# Performance Configuration
MAX_CONCURRENT_NOTIFICATIONS=100
NOTIFICATION_QUEUE_SIZE=10000
NOTIFICATION_BATCH_SIZE=50
NOTIFICATION_RETRY_ATTEMPTS=3
NOTIFICATION_RETRY_DELAY=3000

# WebSocket Configuration
WEBSOCKET_HEARTBEAT_INTERVAL=25000
WEBSOCKET_HEARTBEAT_TIMEOUT=60000
WEBSOCKET_MAX_CONNECTIONS=1000

# Feature Flags
ENABLE_SMS_NOTIFICATIONS=true
ENABLE_EMAIL_TRACKING=true
ENABLE_ANALYTICS=true
ENABLE_RATE_LIMITING=true
ENABLE_NOTIFICATION_ENCRYPTION=true
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# Backup Configuration
AWS_S3_BACKUP_BUCKET=healthcare-notifications-backups-staging
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your_staging_backup_encryption_key

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000
EXTERNAL_SERVICE_TIMEOUT=10000

# Template Configuration
TEMPLATE_CACHE_TTL=1800
TEMPLATE_RENDER_TIMEOUT=5000
TEMPLATE_MAX_SIZE=1048576

# Analytics Configuration
ANALYTICS_BATCH_SIZE=500
ANALYTICS_FLUSH_INTERVAL=30000
ANALYTICS_RETENTION_DAYS=90

# Notification Preferences
DEFAULT_QUIET_HOURS_START=22:00
DEFAULT_QUIET_HOURS_END=08:00
DEFAULT_NOTIFICATION_FREQUENCY=immediate
CRITICAL_NOTIFICATION_OVERRIDE=true

# External Service Rate Limits (Lower for staging)
SENDGRID_RATE_LIMIT=100
TWILIO_RATE_LIMIT=50
AWS_SES_RATE_LIMIT=100
AWS_SNS_RATE_LIMIT=100

# Database Connection Limits
MONGODB_MAX_POOL_SIZE=10
MONGODB_MIN_POOL_SIZE=2
MONGODB_MAX_IDLE_TIME_MS=30000
MONGODB_SERVER_SELECTION_TIMEOUT_MS=5000

# Redis Configuration
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_RETRY_DELAY_ON_FAILURE_MS=100
REDIS_ENABLE_READY_CHECK=true
REDIS_MAX_RECONNECT_ATTEMPTS=5

# Compliance Configuration
HIPAA_COMPLIANCE_MODE=false
DATA_RETENTION_POLICY_DAYS=90
AUDIT_LOG_RETENTION_DAYS=90
PII_ENCRYPTION_REQUIRED=false

# Notification Categories
MEDICAL_NOTIFICATION_PRIORITY=high
ADMINISTRATIVE_NOTIFICATION_PRIORITY=medium
SYSTEM_NOTIFICATION_PRIORITY=low
MARKETING_NOTIFICATION_PRIORITY=low

# Queue Configuration
NOTIFICATION_QUEUE_PRIORITY_HIGH=notification_queue_high_staging
NOTIFICATION_QUEUE_PRIORITY_MEDIUM=notification_queue_medium_staging
NOTIFICATION_QUEUE_PRIORITY_LOW=notification_queue_low_staging
FAILED_NOTIFICATION_QUEUE=notification_failed_queue_staging
RETRY_NOTIFICATION_QUEUE=notification_retry_queue_staging

# Webhook Configuration
WEBHOOK_TIMEOUT=10000
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_SIGNATURE_HEADER=X-Webhook-Signature

# Load Balancer Configuration
LOAD_BALANCER_HEALTH_CHECK_PATH=/health
LOAD_BALANCER_READY_CHECK_PATH=/ready
LOAD_BALANCER_TIMEOUT=30000

# Deployment Configuration
DEPLOYMENT_ENVIRONMENT=staging
DEPLOYMENT_REGION=us-east-1
DEPLOYMENT_AVAILABILITY_ZONE=us-east-1b
DEPLOYMENT_INSTANCE_TYPE=t3.medium

# Scaling Configuration
AUTO_SCALING_MIN_INSTANCES=1
AUTO_SCALING_MAX_INSTANCES=3
AUTO_SCALING_TARGET_CPU=70
AUTO_SCALING_TARGET_MEMORY=80

# Network Configuration
ALLOWED_IPS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
BLOCKED_IPS=
FIREWALL_ENABLED=true

# Maintenance Configuration
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="Staging system is currently under maintenance. Please try again later."
MAINTENANCE_ALLOWED_IPS=10.0.0.0/8

# Error Handling Configuration
ERROR_STACK_TRACE_ENABLED=true
ERROR_NOTIFICATION_THRESHOLD=5
ERROR_NOTIFICATION_INTERVAL=300000

# Cache Warming Configuration
CACHE_WARMING_ENABLED=true
CACHE_WARMING_TEMPLATES=true
CACHE_WARMING_PREFERENCES=true
CACHE_WARMING_ANALYTICS=false

# Testing Configuration
ENABLE_TEST_ENDPOINTS=true
TEST_EMAIL_RECIPIENT=test@yourdomain.com
TEST_SMS_RECIPIENT=+1234567890
MOCK_EXTERNAL_SERVICES=false